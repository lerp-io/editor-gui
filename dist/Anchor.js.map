{
  "version": 3,
  "file": "Anchor.js",
  "sourceRoot": "..",
  "sources": [
    "components/Anchor.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "import {createElement,useState,useEffect,useContext,useRef,createRef} from 'react'\nh = createElement\nimport cn from 'classnames'\n# import decidePosition from './decidePosition.coffee'\nimport LayoutContext from './LayoutContext'\nimport {clampPosition,clampHeight,clampWidth} from './Align'\n\n\nBAR_DIM = 12\nREBAR_DIM = 4\nDOT_DIM = 4\n\nAnchor = (props)->\n\t\n\tanchor_ref = useRef('ed-anchor',anchor_ref)\n\tcontext = useContext(LayoutContext)\n\tcontent_ref = useRef()\n\t[dim,setDim] = useState({})\n\t[drag_start_pos,setDragStartPos] = useState(undefined)\n\t[resize_start_pos,setResizeStartPos] = useState(undefined)\n\t[resize_dir,setResizeDir] = useState(undefined)\n\t[set_handle_pos,setHandlePos] = useState(undefined)\n\t[is_dragging,setDragging] = useState(false)\n\t[z_index,setZIndex] = useState(0)\n\tupdateZIndex = (z_index)->\n\t\tsetZIndex(z_index)\n\t\n\t\n\tcheckAnchorDim = ()->\n\t\tif content_ref.current\n\t\t\trect = content_ref.current.children[0].getBoundingClientRect()\n\t\t\tif dim.width != rect.width || dim.height != rect.height\n\t\t\t\tsetDim({\n\t\t\t\t\twidth: rect.width\n\t\t\t\t\theight: rect.height\n\t\t\t\t})\n\t\n\tuseEffect ()->\n\t\tcheckAnchorDim()\n\t\treturn\n\n\tif !context\n\t\treturn null\n\t\n\n\t\n\tif dim.width && dim.height\n\t\td_left = Math.max(0,props.position[0])\n\t\td_top = Math.max(0,props.position[1])\n\t\td_bottom = Math.max(0,context.view_rect.height - (props.position[1] + dim.height + BAR_DIM))\n\t\td_right = Math.max(0,context.view_rect.width - (props.position[0] + dim.width + BAR_DIM))\n\n\n\tsnap_bot = false\n\n\tif d_left <= Math.min(d_right,Math.min(d_top,d_bottom)) && d_left < props.autoHandleThreshold #AUTO_HANDLE_SET_THRESHOLD\n\t\thandle_pos = 'left'\n\t\tif props.autoSnapHandlePosition\n\t\t\tprops.position[0] = 0\n\n\telse if d_top <= Math.min(d_bottom,Math.min(d_left,d_right)) && d_top < props.autoHandleThreshold\n\t\thandle_pos = 'top'\n\t\tif props.autoSnapHandlePosition\n\t\t\tprops.position[1] = 0\n\n\telse if d_right <= Math.min(d_left,Math.min(d_top,d_bottom)) && d_right < props.autoHandleThreshold\n\t\thandle_pos = 'right'\n\t\tif props.autoSnapHandlePosition\n\t\t\tprops.position[0] = Math.max(0,context.view_rect.width - dim.width - BAR_DIM)\n\t\n\telse if d_bottom <= Math.min(d_top,Math.min(d_left,d_right)) && d_bottom < props.autoHandleThreshold\n\t\thandle_pos = 'bottom'\n\t\tif props.autoSnapHandlePosition\n\t\t\tsnap_bot = true\n\t\t\tprops.position[1] = Math.max(0,context.view_rect.height - dim.height - BAR_DIM)\n\t\n\telse\n\t\thandle_pos = 'top'\n\t\n\tif props.autoHandlePosition && handle_pos != set_handle_pos\n\t\tsetHandlePos(handle_pos)\n\t\n\tif !props.autoHandlePosition\n\t\thandle_pos = props.handlePosition || 'left'\n\t\n\n\tdot_width = DOT_DIM\n\tdot_height = DOT_DIM\n\t\n\n\tif dim.width && dim.height\n\n\t\tswitch handle_pos\n\t\t\twhen 'left'\n\t\t\t\tself_width = dim.width+BAR_DIM\n\t\t\t\tself_height = dim.height\n\t\t\twhen 'right'\n\t\t\t\tself_width = dim.width+BAR_DIM\n\t\t\t\tself_height = dim.height\n\t\t\twhen 'top'\n\t\t\t\tself_height = dim.height+BAR_DIM\n\t\t\t\tself_width = dim.width\n\t\t\twhen 'bottom'\n\t\t\t\tself_width = dim.width\n\t\t\t\tself_height = dim.height+BAR_DIM\n\n\t\t[offset_x,offset_y] = clampPosition(context,props.position[0],props.position[1],self_width,self_height,undefined)\n\t\tprops.position[0] += offset_x\n\t\tprops.position[1] += offset_y\n\n\n\t\tswitch handle_pos\n\t\t\twhen 'left'\n\t\t\t\tbar_width = BAR_DIM\n\t\t\t\tbar_height = dim.height\n\t\t\t\tbar_left = props.position[0]\n\t\t\t\tbar_top = props.position[1]\n\t\t\t\t\n\t\t\t\trebar_left = props.position[0]+dim.width+BAR_DIM\n\t\t\t\trebar_top = props.position[1]\n\t\t\t\t\n\t\t\t\tcontent_x = props.position[0]+BAR_DIM\n\t\t\t\tcontent_y = props.position[1]\n\t\t\t\tif !props.visible\n\t\t\t\t\tdot_height = DOT_DIM*3\n\t\t\t\t\n\t\t\twhen 'right'\n\t\t\t\tbar_width = BAR_DIM\n\t\t\t\tbar_height = dim.height\n\t\t\t\tbar_left = props.position[0]+dim.width\n\t\t\t\tbar_top = props.position[1]\n\t\t\t\t\n\t\t\t\trebar_left = props.position[0]-REBAR_DIM\n\t\t\t\trebar_top = props.position[1]\n\t\t\t\t\n\t\t\t\tcontent_x = props.position[0]\n\t\t\t\tcontent_y = props.position[1]\n\t\t\t\tif !props.visible\n\t\t\t\t\tdot_height = DOT_DIM*3\n\t\t\t\t\n\n\t\t\twhen 'top'\n\t\t\t\tbar_width = dim.width\n\t\t\t\tbar_height = BAR_DIM\n\t\t\t\tbar_left = props.position[0]\n\t\t\t\tbar_top = props.position[1]\n\n\t\t\t\trebar_left = props.position[0]\n\t\t\t\trebar_top = props.position[1]+dim.height+BAR_DIM\n\t\t\t\t\n\t\t\t\tcontent_x = props.position[0]\n\t\t\t\tcontent_y = props.position[1]+BAR_DIM\n\t\t\t\tif !props.visible\n\t\t\t\t\tdot_width = DOT_DIM * 3\n\t\t\t\t\n\t\t\t\n\t\t\twhen 'bottom'\n\t\t\t\tbar_width = dim.width\n\t\t\t\tbar_height = BAR_DIM\n\t\t\t\tbar_left = props.position[0]\n\t\t\t\tbar_top = props.position[1]+dim.height\n\n\t\t\t\trebar_left = props.position[0]\n\t\t\t\trebar_top = props.position[1]-REBAR_DIM\n\n\t\t\t\tcontent_x = props.position[0]\n\t\t\t\tcontent_y = props.position[1]\n\n\t\t\t\tif !props.visible\n\t\t\t\t\tdot_width = DOT_DIM * 3\n\n\n\tself_context = Object.assign {},context,\n\t\talign: props.align\n\t\tclamp_width: props.size?[0] || 0\n\t\tclamp_height: props.size?[1] || 0\n\t\tx: content_x\n\t\ty: content_y\n\t\troot: yes\n\t\tcheckAnchorDim: checkAnchorDim\n\n\n\tif props.visible || (!dim.width? || !dim.height?)\n\t\tcontent = h 'div',\n\t\t\tcn: 'ed-anchor-content'\n\t\t\tref: content_ref\n\t\t\th LayoutContext.Provider,\n\t\t\t\tvalue: self_context\n\t\t\t\tprops.children\n\t\n\t\n\tswitch resize_dir\n\t\twhen 'bottom'\n\t\t\tresize_cursor = 's-resize'\n\t\twhen 'top'\n\t\t\tresize_cursor = 'n-resize'\n\t\twhen 'left'\n\t\t\tresize_cursor = 'w-resize'\n\t\twhen 'right'\n\t\t\tresize_cursor = 'e-resize'\n\n\n\tif props.size && props.visible\n\t\n\t\tresize_bar_style = \n\t\t\tbackground: props.barColor || 'black'\n\t\t\ttop: rebar_top\n\t\t\tleft: rebar_left\n\t\t\theight:  (handle_pos == 'left' || handle_pos == 'right') && bar_height || REBAR_DIM\n\t\t\twidth:  (handle_pos == 'left' || handle_pos == 'right') && REBAR_DIM || bar_width\n\t\t\tflexDirection: (handle_pos == 'left' || handle_pos == 'right') && 'column' || 'row'\n\t\t\tcursor: resize_cursor\n\n\t\ton_resize_bar_mouse_down = (e)->\n\t\t\tsetDragging(true) #need code review\n\t\t\tsetResizeStartPos([e.clientX,e.clientY,dim.width,dim.height,props.position[0],props.position[1]])\n\t\t\te.preventDefault()\n\t\t\te.stopPropagation()\n\t\t\treturn false\n\n\t\ton_resize_bar_mouse_move = (e)->\n\t\t\trect = e.target.getBoundingClientRect()\n\t\t\tif handle_pos == 'bottom' || handle_pos == 'top'\n\t\t\t\tif e.clientX < rect.left + rect.width * 1/3\n\t\t\t\t\tdir = 'left'\n\t\t\t\telse if e.clientX > rect.left + rect.width * 2/3\n\t\t\t\t\tdir = 'right'\n\t\t\t\telse\n\t\t\t\t\tif handle_pos == 'bottom'\n\t\t\t\t\t\tdir ='top' \n\t\t\t\t\telse\n\t\t\t\t\t\tdir = 'bottom' \n\t\t\telse if handle_pos == 'left' || handle_pos == 'right'\n\t\t\t\tif e.clientY < rect.top + rect.height * 1/3\n\t\t\t\t\tdir = 'top'\n\t\t\t\telse if e.clientY > rect.top + rect.height * 2/3\n\t\t\t\t\tdir = 'bottom'\n\t\t\t\telse\n\t\t\t\t\tif handle_pos == 'left'\n\t\t\t\t\t\tdir = 'right'\n\t\t\t\t\telse\n\t\t\t\t\t\tdir = 'left'\n\n\t\t\tif resize_dir != dir && dir\n\t\t\t\tif (dir == 'top' || dir == 'bottom') && props.resizeHeight == false\n\t\t\t\t\treturn false\n\t\t\t\tif (dir == 'left' || dir == 'right') && props.resizeWidth == false\n\t\t\t\t\treturn false\n\t\t\t\t\t\n\t\t\t\tsetResizeDir(dir)\n\t\t\n\t\ton_resize_bar_mouse_leave = ->\n\t\t\tif !is_dragging\n\t\t\t\tsetResizeDir(undefined)\n\n\t\tresize_bar = h 'div',\n\t\t\tkey: 'resize-bar'\n\t\t\tstyle: resize_bar_style\n\t\t\tcn: 'ed-anchor-handle-resize'\n\t\t\tonMouseLeave: on_resize_bar_mouse_leave\n\t\t\tonMouseMove: on_resize_bar_mouse_move\n\t\t\tonMouseDown: on_resize_bar_mouse_down\n\t\t\tonMouseEnter: on_resize_bar_mouse_move\n\n\n\th 'div',\n\t\tstyle:\n\t\t\ttop: 0\n\t\t\tleft: 0\n\t\t\tzIndex: z_index\n\t\t\twidth: (resize_start_pos|| drag_start_pos) && '100vw' || undefined\n\t\t\theight: (resize_start_pos || drag_start_pos) && '100vh' || undefined\n\t\t\tcursor: resize_cursor\n\t\tcn: cn('ed-anchor',drag_start_pos && 'ed-anchor-drag',resize_start_pos && 'ed-anchor-resize')\n\t\tref: anchor_ref\n\t\tonMouseMove: (e)->\n\t\t\t\n\t\t\tif resize_start_pos\n\t\t\t\n\t\t\t\tif !is_dragging\n\t\t\t\t\tsetDragging(true)\n\t\t\t\t\n\t\t\t\twidth = props.size[0]\n\t\t\t\theight = props.size[1]\n\t\t\t\tleft = props.position[0]\n\t\t\t\ttop = props.position[1]\n\n\t\t\t\t\n\t\t\t\tswitch resize_dir\n\t\t\t\t\twhen 'bottom'\n\t\t\t\t\t\theight = Math.max(0,resize_start_pos[3]+e.clientY-resize_start_pos[1])\n\t\t\t\t\t\n\t\t\t\t\twhen 'top'\n\t\t\t\t\t\tif handle_pos == 'left' || handle_pos == 'right'\n\t\t\t\t\t\t\theight = Math.max(0,resize_start_pos[3]-e.clientY+resize_start_pos[1])\n\t\t\t\t\t\t\ttop = Math.max(0,resize_start_pos[5]+e.clientY-resize_start_pos[1])\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\theight = Math.max(0,resize_start_pos[3]-e.clientY+resize_start_pos[1])\n\t\t\t\t\twhen 'right'\n\t\t\t\t\t\tif handle_pos == 'top' || handle_pos == 'bottom'\n\t\t\t\t\t\t\twidth = Math.max(0,resize_start_pos[2]+e.clientX-resize_start_pos[0])\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twidth = Math.max(0,resize_start_pos[2]+e.clientX-resize_start_pos[0])\n\t\t\t\t\twhen 'left'\n\t\t\t\t\t\tif handle_pos == 'top' || handle_pos == 'bottom'\n\t\t\t\t\t\t\twidth = Math.max(0,resize_start_pos[2]-e.clientX+resize_start_pos[0])\n\t\t\t\t\t\t\tleft = Math.max(0,resize_start_pos[4]+e.clientX-resize_start_pos[0])\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\twidth = Math.max(0,resize_start_pos[2]-e.clientX+resize_start_pos[0])\n\t\t\t\t\n\t\t\t\tprops.setPosition(left,top)\n\t\t\t\tprops.setSize(width,height)\n\t\t\t\t\n\t\t\t\te.stopPropagation()\n\t\t\t\te.preventDefault()\n\t\t\t\treturn false\n\n\t\t\telse if drag_start_pos\n\t\t\t\tif !is_dragging\n\t\t\t\t\tsetDragging(true)\n\t\t\t\tself_x = drag_start_pos[2]+e.clientX-drag_start_pos[0]\n\t\t\t\tself_y = drag_start_pos[3]+e.clientY-drag_start_pos[1]\n\t\t\t\t\n\t\t\t\tprops.setPosition(self_x,self_y)\n\t\t\t\tif !props.visible\n\t\t\t\t\tprops.onBarClick()\n\t\t\t\te.stopPropagation()\n\t\t\t\te.preventDefault()\n\t\t\t\treturn false\n\n\n\t\tonMouseUp: (e)->\n\n\t\t\tif resize_dir\n\t\t\t\tsetResizeDir(undefined)\n\n\t\t\tif drag_start_pos != undefined\n\t\t\t\tsetDragStartPos(undefined)\n\t\t\t\tsetDragging(false)\n\t\t\t\tif !is_dragging\n\t\t\t\t\tprops.onBarClick()\n\t\t\t\te.stopPropagation()\n\t\t\t\te.preventDefault()\n\t\t\t\treturn false\n\t\t\t\t\n\t\t\t\n\t\t\telse if resize_start_pos != undefined\n\t\t\t\tsetResizeStartPos(undefined)\n\t\t\t\tsetDragging(false)\n\t\t\t\t\n\t\t\t\te.stopPropagation()\n\t\t\t\te.preventDefault()\n\t\t\t\treturn false\n\t\t\telse if is_dragging\n\t\t\t\tsetDragging(false)\n\t\t\t\n\n\t\t\tif resize_dir\n\t\t\t\tsetResizeDir(undefined)\n\t\t\t\t\n\t\tonMouseEnter: ()->\n\t\t\tsetZIndex(999)\n\t\t\n\t\tonMouseLeave: ()->\n\t\t\tsetZIndex(0)\n\t\t\tif drag_start_pos != undefined\n\t\t\t\tsetDragStartPos(undefined)\n\t\t\t\tsetDragging(false)\n\t\t\tif resize_start_pos != undefined\n\t\t\t\tsetResizeStartPos(undefined)\n\t\t\t\tsetDragging(false)\n\t\t\t\t\n\t\t\n\t\t\n\n\n\t\th 'div',\n\t\t\tcn: 'ed-anchor-handle'\n\t\t\tstyle:\n\t\t\t\ttop: bar_top\n\t\t\t\tleft: bar_left\n\t\t\t\theight: bar_height\n\t\t\t\twidth: bar_width\n\t\t\t\tflexDirection: (handle_pos == 'left' || handle_pos == 'right') && 'column' || 'row'\n\t\t\t\tbackground: props.barColor || 'black'\n\t\t\t\t\n\t\t\tonMouseDown: (e)->\n\t\t\t\tsetDragStartPos([e.clientX,e.clientY,props.position[0],props.position[1]])\n\t\t\t\te.stopPropagation()\n\t\t\t\te.preventDefault()\n\t\t\t\treturn false\n\t\t\tfor i in [0...props.dotCount || 1]\n\t\t\t\th 'div',\n\t\t\t\t\tcn: 'ed-anchor-dot'\n\t\t\t\t\tkey: i\n\t\t\t\t\tstyle:\n\t\t\t\t\t\tbackground: props.dotColor || 'white'\n\t\t\t\t\t\twidth: dot_width\n\t\t\t\t\t\theight: dot_height\n\n\t\tresize_bar\n\t\tcontent\n\n\nAnchor.defaultProps = \n\tautoHandleThreshold : 20\n\nexport default Anchor"
  ]
}